<!DOCTYPE html>
<html lang="vi">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>H·ªì S∆° C√° Nh√¢n</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 20px;
    }

    .profile-container {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border-radius: 20px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
      max-width: 1400px;
      width: 100%;
      margin: 0 auto;
      overflow: hidden;
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .profile-header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      padding: 40px;
      color: white;
      position: relative;
    }

    .profile-header::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background:
        radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
        radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.15) 0%, transparent 50%);
      pointer-events: none;
    }

    .header-content {
      display: grid;
      grid-template-columns: 200px 1fr auto;
      gap: 40px;
      align-items: center;
      position: relative;
      z-index: 1;
    }

    .avatar-section {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 15px;
    }

    .avatar-container {
      position: relative;
      width: 180px;
      height: 180px;
      border-radius: 50%;
      overflow: hidden;
      border: 4px solid rgba(255, 255, 255, 0.3);
      box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .avatar-container:hover {
      transform: scale(1.05);
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
    }

    .avatar-img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .avatar-upload-overlay {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.7);
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      transition: opacity 0.3s ease;
      color: white;
      font-size: 14px;
      font-weight: 500;
    }

    .avatar-container:hover .avatar-upload-overlay {
      opacity: 1;
    }

    .file-input {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      opacity: 0;
      cursor: pointer;
    }

    .profile-info {
      flex: 1;
    }

    .profile-name {
      font-size: 32px;
      font-weight: 700;
      margin-bottom: 8px;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .profile-subtitle {
      font-size: 18px;
      opacity: 0.9;
      margin-bottom: 20px;
    }

    .profile-stats {
      display: flex;
      gap: 30px;
      margin-top: 20px;
    }

    .stat-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 15px 20px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 12px;
      backdrop-filter: blur(10px);
    }

    .stat-value {
      font-size: 24px;
      font-weight: 700;
      margin-bottom: 5px;
    }

    .stat-label {
      font-size: 14px;
      opacity: 0.8;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .profile-actions {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .upload-btn, .edit-profile-btn {
      background: rgba(255, 255, 255, 0.2);
      color: white;
      border: 1px solid rgba(255, 255, 255, 0.3);
      padding: 12px 24px;
      border-radius: 10px;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
      backdrop-filter: blur(10px);
    }

    .upload-btn:hover, .edit-profile-btn:hover {
      background: rgba(255, 255, 255, 0.3);
      transform: translateY(-1px);
    }

    .main-content {
      padding: 40px;
      background: #f8f9fa;
    }

    .content-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 30px;
    }

    .content-section {
      background: white;
      border-radius: 15px;
      padding: 30px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
      border: 1px solid rgba(0, 0, 0, 0.05);
    }

    .section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 25px;
      padding-bottom: 15px;
      border-bottom: 2px solid #f0f2f5;
    }

    .section-title {
      font-size: 22px;
      font-weight: 600;
      color: #2c3e50;
    }

    .section-badge {
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: white;
      padding: 6px 12px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 500;
    }

    /* Personal Information Section */
    .personal-info-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
    }

    .info-item {
      padding: 15px;
      background: #f8f9fa;
      border-radius: 10px;
      border-left: 4px solid #667eea;
    }

    .info-label {
      font-size: 12px;
      font-weight: 600;
      color: #6c757d;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 5px;
    }

    .info-value {
      font-size: 16px;
      color: #2c3e50;
      font-weight: 500;
    }

    /* Personality Assessments Section */
    .assessment-tabs {
      display: flex;
      gap: 10px;
      margin-bottom: 25px;
      border-bottom: 2px solid #f0f2f5;
    }

    .tab-btn {
      background: none;
      border: none;
      padding: 12px 20px;
      font-size: 14px;
      font-weight: 500;
      color: #6c757d;
      cursor: pointer;
      border-bottom: 3px solid transparent;
      transition: all 0.3s ease;
    }

    .tab-btn.active {
      color: #667eea;
      border-bottom-color: #667eea;
    }

    .tab-content {
      display: none;
    }

    .tab-content.active {
      display: block;
    }

    .assessment-card {
      background: linear-gradient(135deg, #f8f9ff 0%, #f0f2ff 100%);
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 20px;
      border-left: 4px solid #667eea;
    }

    .assessment-result {
      margin-bottom: 15px;
    }

    .result-label {
      font-size: 12px;
      font-weight: 600;
      color: #6c757d;
      text-transform: uppercase;
      margin-bottom: 5px;
    }

    .result-value {
      font-size: 18px;
      font-weight: 700;
      color: #2c3e50;
    }

    .assessment-traits {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 15px;
    }

    .trait-tag {
      background: rgba(102, 126, 234, 0.1);
      color: #667eea;
      padding: 6px 12px;
      border-radius: 20px;
      font-size: 13px;
      font-weight: 500;
    }

    /* Job Recommendations Section */
    .job-recommendations {
      grid-column: 1 / -1;
    }

    .recommendation-list {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      gap: 20px;
    }

    .job-card {
      background: white;
      border: 1px solid #e1e5e9;
      border-radius: 12px;
      padding: 20px;
      transition: all 0.3s ease;
      cursor: pointer;
    }

    .job-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
      border-color: #667eea;
    }

    .job-title {
      font-size: 16px;
      font-weight: 600;
      color: #2c3e50;
      margin-bottom: 10px;
    }

    .job-match {
      display: inline-block;
      background: linear-gradient(135deg, #4CAF50, #45a049);
      color: white;
      padding: 4px 8px;
      border-radius: 12px;
      font-size: 11px;
      font-weight: 500;
      margin-bottom: 10px;
    }

    .job-skills {
      font-size: 13px;
      color: #6c757d;
      line-height: 1.5;
    }

    /* Assessment History - Enhanced */
    .history-list {
      max-height: 400px;
      overflow-y: auto;
      padding: 5px;
    }

    .history-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 18px;
      background: linear-gradient(135deg, #f8f9ff 0%, #f0f2ff 100%);
      border-radius: 12px;
      margin-bottom: 15px;
      transition: all 0.3s ease;
      border-left: 4px solid #667eea;
      position: relative;
      overflow: hidden;
    }

    .history-item::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 0;
      height: 100%;
      background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
      transition: width 0.3s ease;
    }

    .history-item:hover::before {
      width: 100%;
    }

    .history-item:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(102, 126, 234, 0.15);
      background: linear-gradient(135deg, #ffffff 0%, #f8f9ff 100%);
    }

    .history-info {
      flex: 1;
      position: relative;
      z-index: 1;
    }

    .history-type {
      font-weight: 700;
      color: #2c3e50;
      margin-bottom: 5px;
      font-size: 14px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .history-type-icon {
      width: 24px;
      height: 24px;
      border-radius: 50%;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      font-weight: 600;
      color: white;
    }

    .history-type-mbti { background: linear-gradient(135deg, #667eea, #764ba2); }
    .history-type-bigfive { background: linear-gradient(135deg, #4CAF50, #45a049); }
    .history-type-disc { background: linear-gradient(135deg, #FF6B6B, #ee5a24); }

    .history-date {
      font-size: 12px;
      color: #6c757d;
      margin-bottom: 3px;
    }

    .history-details {
      font-size: 11px;
      color: #868e96;
      display: flex;
      gap: 15px;
      margin-top: 5px;
    }

    .history-detail-item {
      display: flex;
      align-items: center;
      gap: 4px;
    }

    .history-score {
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: white;
      padding: 10px 16px;
      border-radius: 20px;
      font-size: 13px;
      font-weight: 700;
      position: relative;
      z-index: 1;
      min-width: 80px;
      text-align: center;
      box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
    }

    .history-actions {
      display: flex;
      gap: 8px;
      margin-left: 15px;
    }

    .history-action-btn {
      background: rgba(102, 126, 234, 0.1);
      color: #667eea;
      border: 1px solid rgba(102, 126, 234, 0.2);
      padding: 6px 10px;
      border-radius: 8px;
      font-size: 11px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .history-action-btn:hover {
      background: #667eea;
      color: white;
      transform: translateY(-1px);
    }

    /* Enhanced Assessment Results */
    .assessment-card {
      background: linear-gradient(135deg, #f8f9ff 0%, #f0f2ff 100%);
      border-radius: 15px;
      padding: 25px;
      margin-bottom: 20px;
      border-left: 5px solid #667eea;
      position: relative;
      overflow: hidden;
    }

    .assessment-card::before {
      content: '';
      position: absolute;
      top: 0;
      right: 0;
      width: 100px;
      height: 100px;
      background: radial-gradient(circle, rgba(102, 126, 234, 0.1) 0%, transparent 70%);
      border-radius: 50%;
      transform: translate(30px, -30px);
    }

    .assessment-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .assessment-title {
      font-size: 18px;
      font-weight: 700;
      color: #2c3e50;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .assessment-badge {
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: white;
      padding: 4px 12px;
      border-radius: 15px;
      font-size: 11px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .assessment-score-display {
      background: white;
      border-radius: 12px;
      padding: 15px;
      margin-bottom: 15px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
    }

    .score-main {
      font-size: 32px;
      font-weight: 800;
      color: #667eea;
      text-align: center;
      margin-bottom: 10px;
    }

    .score-description {
      text-align: center;
      color: #6c757d;
      font-size: 14px;
      font-style: italic;
    }

    .assessment-details-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin-top: 20px;
    }

    .detail-item {
      background: white;
      padding: 15px;
      border-radius: 10px;
      border-left: 3px solid #667eea;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
    }

    .detail-label {
      font-size: 12px;
      font-weight: 600;
      color: #6c757d;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 8px;
    }

    .detail-value {
      font-size: 16px;
      font-weight: 700;
      color: #2c3e50;
    }

    .progress-bar {
      width: 100%;
      height: 8px;
      background: #e9ecef;
      border-radius: 4px;
      overflow: hidden;
      margin-top: 8px;
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(135deg, #667eea, #764ba2);
      border-radius: 4px;
      transition: width 0.3s ease;
    }

    /* Profile Actions */
    .profile-actions {
      display: flex;
      gap: 10px;
      align-items: center;
    }

    .edit-profile-btn {
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 10px;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
      white-space: nowrap;
    }

    .edit-profile-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3);
    }

    /* Assessment Tabs */
    .assessment-tabs {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
      border-bottom: 2px solid #e9ecef;
      flex-wrap: wrap;
    }

    .tab-btn {
      background: none;
      border: none;
      padding: 12px 20px;
      font-size: 14px;
      font-weight: 500;
      color: #6c757d;
      cursor: pointer;
      transition: all 0.3s ease;
      border-bottom: 3px solid transparent;
      margin-bottom: -2px;
    }

    .tab-btn:hover {
      color: #667eea;
    }

    .tab-btn.active {
      color: #667eea;
      border-bottom-color: #667eea;
    }

    /* Tab Content */
    .tab-content {
      display: none;
    }

    .tab-content.active {
      display: block;
      animation: fadeIn 0.3s ease;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(-10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Action Buttons */
    .action-buttons {
      display: flex;
      gap: 15px;
      margin-top: 20px;
      flex-wrap: wrap;
    }

    .action-btn {
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 10px;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .action-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3);
    }

    .action-btn.secondary {
      background: white;
      color: #667eea;
      border: 2px solid #667eea;
    }

    .action-btn.secondary:hover {
      background: #667eea;
      color: white;
    }

    /* Modal */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
      z-index: 1000;
      backdrop-filter: blur(5px);
    }

    .modal.active {
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .modal-content {
      background: white;
      border-radius: 15px;
      padding: 30px;
      max-width: 500px;
      width: 90%;
      max-height: 80vh;
      overflow-y: auto;
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .modal-title {
      font-size: 20px;
      font-weight: 600;
      color: #2c3e50;
    }

    .modal-close {
      background: none;
      border: none;
      font-size: 24px;
      cursor: pointer;
      color: #6c757d;
    }

    .form-group {
      margin-bottom: 20px;
    }

    .form-label {
      display: block;
      margin-bottom: 8px;
      color: #2c3e50;
      font-weight: 500;
    }

    .form-input, .form-select {
      width: 100%;
      padding: 12px;
      border: 2px solid #e1e5e9;
      border-radius: 8px;
      font-size: 14px;
      transition: all 0.3s ease;
    }

    .form-input:focus, .form-select:focus {
      outline: none;
      border-color: #667eea;
    }

    /* Loading State */
    .loading {
      display: none;
      text-align: center;
      padding: 20px;
    }

    .loading.active {
      display: block;
    }

    .spinner {
      border: 3px solid #f3f3f3;
      border-top: 3px solid #667eea;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      animation: spin 1s linear infinite;
      margin: 0 auto 10px;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    /* Responsive Design */
    @media (max-width: 1200px) {
      .content-grid {
        grid-template-columns: 1fr;
      }

      .job-recommendations {
        grid-column: 1;
      }
    }

    @media (max-width: 768px) {
      .header-content {
        grid-template-columns: 1fr;
        text-align: center;
        gap: 20px;
      }

      .profile-stats {
        justify-content: center;
      }

      .personal-info-grid {
        grid-template-columns: 1fr;
      }

      .recommendation-list {
        grid-template-columns: 1fr;
      }
    }

    /* Empty State */
    .empty-state {
      text-align: center;
      padding: 40px;
      color: #6c757d;
    }

    .empty-state-icon {
      font-size: 48px;
      margin-bottom: 15px;
      opacity: 0.5;
    }

    .empty-state-text {
      font-size: 16px;
      margin-bottom: 20px;
    }
  </style>
</head>

<body>
  <div class="profile-container">
    <!-- Profile Header -->
    <div class="profile-header">
      <div class="header-content">
        <!-- Avatar Section -->
        <div class="avatar-section">
          <form action="/users/upload-avatar" method="POST" enctype="multipart/form-data" id="avatarForm">
            <div class="avatar-container">
              <img src="{{#if user.avatar}}{{user.avatar}}{{else}}/avatars/default-avatar-red.png{{/if}}" alt="Avatar" class="avatar-img" id="avatarPreview" onerror="this.src='/avatars/default-avatar-red.png'" />
              <div class="avatar-upload-overlay">
                <span>Thay ƒë·ªïi ·∫£nh</span>
              </div>
              <input type="file" name="avatar" class="file-input" accept="image/*" id="avatarInput">
            </div>
            <button type="submit" class="upload-btn">C·∫≠p nh·∫≠t Avatar</button>
          </form>
        </div>

        <!-- Profile Info -->
        <div class="profile-info">
          <h1 class="profile-name">{{user.username}}</h1>
          <p class="profile-subtitle">@{{user.username}} ‚Ä¢ {{user.major}}</p>
          <div class="profile-stats">
            <div class="stat-item">
              <div class="stat-value" id="assessmentCount">0</div>
              <div class="stat-label">B√†i ki·ªÉm tra</div>
            </div>
            <div class="stat-item">
              <div class="stat-value" id="profileCompleteness">0%</div>
              <div class="stat-label">Ho√†n thi·ªán</div>
            </div>
          </div>
        </div>

        <!-- Profile Actions -->
        <div class="profile-actions">
          <button class="edit-profile-btn" onclick="openEditModal()">
            ‚úèÔ∏è Ch·ªânh s·ª≠a th√¥ng tin
          </button>
        </div>
      </div>
    </div>
{{title}}
<p>User email: {{user.email}}</p>
    <!-- Main Content -->
    <div class="main-content">
      <div class="content-grid">
        <!-- Personal Information Section -->
        <div class="content-section">
          <div class="section-header">
            <h2 class="section-title">üìã Th√¥ng tin c√° nh√¢n</h2>
            <span class="section-badge">Profile</span>
          </div>
          <div class="personal-info-grid">
            <div class="info-item">
              <div class="info-label">Email</div>
              <div class="info-value">{{user.email}}</div>
            </div>
            <div class="info-item">
              <div class="info-label">S·ªë ƒëi·ªán tho·∫°i</div>
              <div class="info-value">{{user.phone}}</div>
            </div>
            <div class="info-item">
              <div class="info-label">Ng√†y sinh</div>
              <div class="info-value">{{birthdate}}</div>
            </div>
            <div class="info-item">
              <div class="info-label">Gi·ªõi t√≠nh</div>
              <div class="info-value">{{user.gender}}</div>
            </div>
            <div class="info-item">
              <div class="info-label">B·∫±ng c·∫•p</div>
              <div class="info-value">{{user.degree}}</div>
            </div>
            <div class="info-item">
              <div class="info-label">Kinh nghi·ªám</div>
              <div class="info-value">{{user.experience}}</div>
            </div>
          </div>
        </div>

        <!-- Personality Assessments Section -->
        <div class="content-section">
          <div class="section-header">
            <h2 class="section-title">üß† K·∫øt qu·∫£ ƒë√°nh gi√° t√≠nh c√°ch</h2>
            <span class="section-badge">Assessments</span>
          </div>

          <div class="assessment-tabs">
            <button class="tab-btn active" onclick="switchTab('mbti')">MBTI</button>
            <button class="tab-btn" onclick="switchTab('bigfive')">Big Five</button>
            <button class="tab-btn" onclick="switchTab('disc')">DISC</button>
          </div>

          <div id="mbti" class="tab-content active">
            <div class="loading" id="mbti-loading">
              <div class="spinner"></div>
              <p>ƒêang t·∫£i k·∫øt qu·∫£ MBTI...</p>
            </div>
            <div id="mbti-results"></div>
          </div>

          <div id="bigfive" class="tab-content">
            <div class="loading" id="bigfive-loading">
              <div class="spinner"></div>
              <p>ƒêang t·∫£i k·∫øt qu·∫£ Big Five...</p>
            </div>
            <div id="bigfive-results"></div>
          </div>

          <div id="disc" class="tab-content">
            <div class="loading" id="disc-loading">
              <div class="spinner"></div>
              <p>ƒêang t·∫£i k·∫øt qu·∫£ DISC...</p>
            </div>
            <div id="disc-results"></div>
          </div>

          <div class="action-buttons">
            <button class="action-btn" onclick="takeAssessment('mbti')">L√†m b√†i MBTI</button>
            <button class="action-btn secondary" onclick="takeAssessment('big-five')">L√†m b√†i Big Five</button>
            <button class="action-btn secondary" onclick="takeAssessment('disc')">L√†m b√†i DISC</button>
          </div>
        </div>

        <!-- Applied Jobs Section -->
        <div class="content-section job-recommendations">
          <div class="section-header">
            <h2 class="section-title">üíº Vi·ªác l√†m ƒë√£ ·ª©ng tuy·ªÉn</h2>
            <span class="section-badge">Applications</span>
          </div>

          <div class="action-buttons">
            <a href="/users/applied-jobs" class="action-btn">
              üìã Xem chi ti·∫øt ·ª©ng tuy·ªÉn
            </a>
            <a href="/jobs/search-results" class="action-btn secondary">
              üîç T√¨m vi·ªác l√†m m·ªõi
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Edit Profile Modal -->
  <div id="editModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title">Ch·ªânh s·ª≠a th√¥ng tin c√° nh√¢n</h3>
        <button class="modal-close" onclick="closeEditModal()">&times;</button>
      </div>
      <form action="/auth/profile/edit" method="POST">
        <div class="form-group">
          <label class="form-label">T√™n ng∆∞·ªùi d√πng</label>
          <input type="text" name="username" class="form-input" value="{{user.username}}">
        </div>
        <div class="form-group">
          <label class="form-label">Email</label>
          <input type="email" name="email" class="form-input" value="{{user.email}}">
        </div>
        <div class="form-group">
          <label class="form-label">S·ªë ƒëi·ªán tho·∫°i</label>
          <input type="tel" name="phone" class="form-input" value="{{user.phone}}">
        </div>
        <div class="form-group">
          <label class="form-label">Gi·ªõi t√≠nh</label>
          <select name="gender" class="form-select">
            <option value="Nam" {{#if (eq user.gender "Nam")}}selected{{/if}}>Nam</option>
            <option value="N·ªØ" {{#if (eq user.gender "N·ªØ")}}selected{{/if}}>N·ªØ</option>
            <option value="Kh√°c" {{#if (eq user.gender "Kh√°c")}}selected{{/if}}>Kh√°c</option>
          </select>
        </div>
        <div class="form-group">
          <label class="form-label">B·∫±ng c·∫•p</label>
          <input type="text" name="degree" class="form-input" value="{{user.degree}}">
        </div>
        <div class="form-group">
          <label class="form-label">Kinh nghi·ªám</label>
          <input type="text" name="experience" class="form-input" value="{{user.experience}}">
        </div>
        <div class="action-buttons">
          <button type="submit" class="action-btn">L∆∞u thay ƒë·ªïi</button>
          <button type="button" class="action-btn secondary" onclick="closeEditModal()">H·ªßy</button>
        </div>
      </form>
    </div>
  </div>

  <script>
    // Global variables
    let currentAssessmentData = {};
    let jobRecommendations = [];

    // Initialize page
    document.addEventListener('DOMContentLoaded', function() {
      loadProfileData();
      setupEventListeners();
    });

    // Setup event listeners
    function setupEventListeners() {
      // Avatar upload preview
      document.getElementById('avatarInput').addEventListener('change', function (e) {
        const file = e.target.files[0];
        if (file) {
          const reader = new FileReader();
          reader.onload = function (e) {
            document.getElementById('avatarPreview').src = e.target.result;
          };
          reader.readAsDataURL(file);
        }
      });

      // Close modal when clicking outside
      document.getElementById('editModal').addEventListener('click', function(e) {
        if (e.target === this) {
          closeEditModal();
        }
      });
    }

    // Load profile data
    async function loadProfileData() {
      try {
        // Load assessment results
        await loadAssessmentResults();

        // Update stats
        updateProfileStats();
      } catch (error) {
        console.error('Error loading profile data:', error);
      }
    }

    // Load assessment results
    async function loadAssessmentResults() {
      try {
        console.log('üîÑ Loading assessment results...');
        
        // Show loading states
        const loadingElements = ['mbti', 'bigfive', 'disc'].map(type => {
          showLoading(`${type}-loading`);
          return `${type}-results`;
        });

        // Get user_id from the page - using Handlebars template variable
        const userId = '{{user._id}}';
        console.log('üë§ User ID:', userId);

        if (!userId || userId === '' || userId === 'undefined') {
          const errorMsg = 'User not authenticated. Please log in.';
          console.error('‚ùå', errorMsg);
          loadingElements.forEach(id => showError(id, errorMsg));
          return;
        }

        try {
          await loadWithUserId(userId);
        } catch (error) {
          console.error('‚ùå Error loading assessment data:', error);
          const errorMsg = error.message || 'Failed to load assessment data. Please try again later.';
          loadingElements.forEach(id => showError(id, errorMsg));
        }
      } catch (error) {
        console.error('‚ùå Unexpected error in loadAssessmentResults:', error);
        showError('mbti-results', 'An unexpected error occurred. Please refresh the page.');
      }
    }

    // Show loading state for an assessment type
    function showLoading(type) {
      const container = document.getElementById(`${type}-results`);
      if (container) {
        container.innerHTML = `
          <div class="loading-state">
            <div class="spinner"></div>
            <p>ƒêang t·∫£i d·ªØ li·ªáu...</p>
          </div>
        `;
      }
    }

    // Hide loading state
    function hideLoading(type) {
      const container = document.getElementById(`${type}-loading`);
      if (container) {
        container.style.display = 'none';
      }
    }

    // Show error message in the specified container
    function showError(containerId, message) {
      const container = document.getElementById(containerId);
      if (container) {
        container.innerHTML = `
          <div class="error-state">
            <i class="fas fa-exclamation-circle"></i>
            <p>${message}</p>
            <button onclick="loadAssessmentResults()" class="retry-btn">Th·ª≠ l·∫°i</button>
          </div>
        `;
      }
    }

    // Show empty state for an assessment type
    function showEmptyState(type) {
      const container = document.getElementById(`${type}-results`);
      if (container) {
        container.innerHTML = `
          <div class="empty-state">
            <i class="fas fa-clipboard-list"></i>
            <p>Ch∆∞a c√≥ d·ªØ li·ªáu ƒë√°nh gi√°</p>
            <a href="/personality-assessments/${type}" class="btn btn-primary">
              L√†m b√†i ƒë√°nh gi√°
            </a>
          </div>
        `;
      }
    }

    // Helper function to load assessment data with specific user ID
    async function loadWithUserId(userId) {
      console.log('üì° Fetching assessment data for user:', userId);

      try {
        // Show loading states
        const loadingPromises = ['mbti', 'big-five', 'disc'].map(type => {
          const normalizedType = type === 'big-five' ? 'bigfive' : type;
          showLoading(normalizedType);
          
          return fetch(`/personality-assessments/api/${type}/latest/${userId}`)
            .then(response => {
              if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
              }
              return response.json();
            })
            .then(data => ({
              type: normalizedType,
              data,
              success: true
            }))
            .catch(error => ({
              type: normalizedType,
              error: error.message,
              success: false
            }));
        });

        // Wait for all requests to complete
        const results = await Promise.all(loadingPromises);
        let hasValidResults = false;

        // Process results
        results.forEach(({ type, data, error, success }) => {
          const containerId = `${type}-results`;
          hideLoading(`${type}-loading`);
          
          if (success && data && data.success && data.result) {
            displayAssessmentResult(type, data.result);
            currentAssessmentData[type] = data.result;
            hasValidResults = true;
            console.log(`‚úÖ ${type.toUpperCase()} data loaded successfully`);
          } else {
            const errorMsg = error || (data ? data.message : 'D·ªØ li·ªáu kh√¥ng h·ª£p l·ªá');
            console.error(`‚ùå Failed to load ${type.toUpperCase()} data:`, errorMsg);
            showError(containerId, `Kh√¥ng th·ªÉ t·∫£i d·ªØ li·ªáu ${type.toUpperCase()}`);
          }
        });

        // Update profile stats if we have any valid results
        if (hasValidResults) {
          updateProfileStats();
        } else {
          throw new Error('Kh√¥ng th·ªÉ t·∫£i b·∫•t k·ª≥ d·ªØ li·ªáu ƒë√°nh gi√° n√†o');
        }
      } catch (error) {
        console.error('üí• L·ªói khi t·∫£i d·ªØ li·ªáu ƒë√°nh gi√°:', error);
        ['mbti', 'bigfive', 'disc'].forEach(type => {
          showError(`${type}-results`, 'ƒê√£ x·∫£y ra l·ªói khi t·∫£i d·ªØ li·ªáu. Vui l√≤ng th·ª≠ l·∫°i.');
          hideLoading(`${type}-loading`);
        });
        throw error;
      } finally {
        console.log('‚ú® ƒê√£ ho√†n th√†nh t·∫£i d·ªØ li·ªáu ƒë√°nh gi√°');
      }
    }

    // Display assessment result - Enhanced
    function displayAssessmentResult(type, result) {
      console.log(`üé® Displaying ${type} assessment result:`, result);
      const resultsContainer = document.getElementById(`${type}-results`);

      if (type === 'mbti') {
        const mbtiDescriptions = {
          'INTJ': 'Ki·∫øn tr√∫c s∆∞ - T∆∞ duy chi·∫øn l∆∞·ª£c, l·∫≠p k·∫ø ho·∫°ch d√†i h·∫°n',
          'INTP': 'Logic h·ªçc - Th√≠ch ph√¢n t√≠ch, gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ ph·ª©c t·∫°p',
          'ENTJ': 'Ch·ªâ huy - L√£nh ƒë·∫°o t·ª± nhi√™n, quy·∫øt ƒëo√°n',
          'ENTP': 'Tranh lu·∫≠n - S√°ng t·∫°o, th√≠ch th·ª≠ th√°ch',
          'INFJ': 'Nh√† ·ªßng h·ªô - L√≠ t∆∞·ªüng, c√≥ t√¢m h·ªìn s√¢u s·∫Øc',
          'INFP': 'Ng∆∞·ªùi h√≤a gi·∫£i - Gi√° tr·ªã c√° nh√¢n cao, s√°ng t·∫°o',
          'ENFJ': 'Ng∆∞·ªùi th·∫ßy - Truy·ªÅn c·∫£m h·ª©ng, quan t√¢m ng∆∞·ªùi kh√°c',
          'ENFP': 'Nh√† v√¥ ƒë·ªãch - ƒêam m√™, s√°ng t·∫°o, ng∆∞·ªùi h∆∞·ªõng ngo·∫°i',
          'ISTJ': 'Ng∆∞·ªùi ki·ªÉm to√°n - Th·ª±c t·∫ø, c√≥ tr√°ch nhi·ªám',
          'ISFJ': 'Ng∆∞·ªùi b·∫£o v·ªá - ·∫§m √°p, c√≥Ë¥£‰ªªÂøÉ',
          'ESTJ': 'Gi√°m ƒë·ªëc - T·ªï ch·ª©c hi·ªáu qu·∫£, quy t·∫Øc r√µ r√†ng',
          'ESFJ': 'Ng∆∞·ªùi cung ·ª©ng - Th√¢n thi·ªán, h√≤a ƒë·ªìng',
          'ISTP': 'Ngh·ªá nh√¢n - Linh ho·∫°t, th√≠ch th·ª±c h√†nh',
          'ISFP': 'Nh√† th√°m hi·ªÉm - Nh·∫°y c·∫£m, gi√° tr·ªã th·∫©m m·ªπ',
          'ESTP': 'Doanh nh√¢n - NƒÉng ƒë·ªông, m·∫°o hi·ªÉm',
          'ESFP': 'Ng∆∞·ªùi gi·∫£i tr√≠ - T·ª± ph√°t, vui v·∫ª'
        };

        resultsContainer.innerHTML = `
          <div class="assessment-card">
            <div class="assessment-header">
              <div class="assessment-title">
                üß† K·∫øt qu·∫£ MBTI
                <span class="assessment-badge">NƒÉng l·ª±c</span>
              </div>
            </div>

            <div class="assessment-score-display">
              <div class="score-main">${result.type}</div>
              <div class="score-description">${mbtiDescriptions[result.type] || 'Lo·∫°i h√¨nh t√≠nh c√°ch ƒë·ªôc ƒë√°o'}</div>
            </div>

            <div class="assessment-details-grid">
              <div class="detail-item">
                <div class="detail-label">NƒÉng l∆∞·ª£ng</div>
                <div class="detail-value">${result.type[0] === 'E' ? 'H∆∞·ªõng ngo·∫°i (Extroversion)' : 'H∆∞·ªõng n·ªôi (Introversion)'}</div>
              </div>
              <div class="detail-item">
                <div class="detail-label">Th√¥ng tin</div>
                <div class="detail-value">${result.type[1] === 'S' ? 'C·∫£m nh·∫≠n (Sensing)' : 'Tr·ª±c gi√°c (Intuition)'}</div>
              </div>
              <div class="detail-item">
                <div class="detail-label">Quy·∫øt ƒë·ªãnh</div>
                <div class="detail-value">${result.type[2] === 'T' ? 'L√Ω tr√≠ (Thinking)' : 'T√¨nh c·∫£m (Feeling)'}</div>
              </div>
              <div class="detail-item">
                <div class="detail-label">L·ªëi s·ªëng</div>
                <div class="detail-value">${result.type[3] === 'J' ? 'K·∫ø ho·∫°ch (Judging)' : 'Linh ho·∫°t (Perceiving)'}</div>
              </div>
            </div>

            ${result.traits ? `
              <div style="margin-top: 20px;">
                <div class="detail-label">ƒê·∫∑c ƒëi·ªÉm n·ªïi b·∫≠t</div>
                <div class="assessment-traits" style="margin-top: 10px;">
                  ${result.traits.map(trait => `<span class="trait-tag">${trait}</span>`).join('')}
                </div>
              </div>
            ` : ''}

            ${result.analysis ? `
              <div style="margin-top: 20px; padding: 15px; background: rgba(102, 126, 234, 0.05); border-radius: 10px;">
                <div style="font-weight: 600; color: #2c3e50; margin-bottom: 8px;">ü§ñ Ph√¢n t√≠ch AI</div>
                <div style="font-size: 14px; color: #6c757d; line-height: 1.5;">
                  ${result.analysis}
                </div>
              </div>
            ` : ''}

            ${result.recommendations ? `
              <div style="margin-top: 20px; padding: 15px; background: rgba(76, 175, 80, 0.05); border-radius: 10px;">
                <div style="font-weight: 600; color: #2c3e50; margin-bottom: 8px;">üíº G·ª£i √Ω c√¥ng vi·ªác ph√π h·ª£p</div>
                <div style="display: flex; flex-wrap: wrap; gap: 8px; margin-top: 10px;">
                  ${result.recommendations.map(job => `
                    <span style="background: linear-gradient(135deg, #4CAF50, #45a049); color: white; padding: 6px 12px; border-radius: 15px; font-size: 12px; font-weight: 500;">
                      ${job}
                    </span>
                  `).join('')}
                </div>
              </div>
            ` : ''}
          </div>
        `;
      } else if (type === 'bigfive') {
        const scores = result.scores || {};
        const descriptions = {
          'openness': 'S·ª± c·ªüi m·ªü v·ªõi tr·∫£i nghi·ªám',
          'conscientiousness': 'T·∫≠n t√¢m v√† c√≥ t·ªï ch·ª©c',
          'extraversion': 'NƒÉng l∆∞·ª£ng h∆∞·ªõng ngo·∫°i',
          'agreeableness': 'H√≤a ƒë·ªìng v√† h·ª£p t√°c',
          'neuroticism': '·ªîn ƒë·ªãnh c·∫£m x√∫c'
        };

        resultsContainer.innerHTML = `
          <div class="assessment-card">
            <div class="assessment-header">
              <div class="assessment-title">
                üåä K·∫øt qu·∫£ Big Five
                <span class="assessment-badge">T√≠nh c√°ch</span>
              </div>
            </div>

            <div class="assessment-details-grid">
              ${Object.entries(scores).map(([dimension, score]) => `
                <div class="detail-item">
                  <div class="detail-label">${descriptions[dimension] || dimension}</div>
                  <div class="detail-value">${score}%</div>
                  <div class="progress-bar">
                    <div class="progress-fill" style="width: ${score}%"></div>
                  </div>
                </div>
              `).join('')}
            </div>

            ${result.analysis ? `
              <div style="margin-top: 20px; padding: 15px; background: rgba(102, 126, 234, 0.05); border-radius: 10px;">
                <div style="font-weight: 600; color: #2c3e50; margin-bottom: 8px;">ü§ñ Ph√¢n t√≠ch AI</div>
                <div style="font-size: 14px; color: #6c757d; line-height: 1.5;">
                  ${result.analysis}
                </div>
              </div>
            ` : ''}

            ${result.recommendations ? `
              <div style="margin-top: 20px; padding: 15px; background: rgba(76, 175, 80, 0.05); border-radius: 10px;">
                <div style="font-weight: 600; color: #2c3e50; margin-bottom: 8px;">üíº G·ª£i √Ω c√¥ng vi·ªác ph√π h·ª£p</div>
                <div style="display: flex; flex-wrap: wrap; gap: 8px; margin-top: 10px;">
                  ${result.recommendations.map(job => `
                    <span style="background: linear-gradient(135deg, #4CAF50, #45a049); color: white; padding: 6px 12px; border-radius: 15px; font-size: 12px; font-weight: 500;">
                      ${job}
                    </span>
                  `).join('')}
                </div>
              </div>
            ` : ''}

            <div style="margin-top: 20px; padding: 15px; background: rgba(102, 126, 234, 0.05); border-radius: 10px;">
              <div style="font-weight: 600; color: #2c3e50; margin-bottom: 8px;">üìä Ph√¢n t√≠ch nhanh</div>
              <div style="font-size: 14px; color: #6c757d; line-height: 1.5;">
                ${getBigFiveAnalysis(scores)}
              </div>
            </div>
          </div>
        `;
      } else if (type === 'disc') {
        const scores = result.scores || {};
        const descriptions = {
          'D': 'Th·ªëng tr·ªã (Dominance) - Quy·∫øt ƒëo√°n, tr·ª±c ti·∫øp',
          'I': '·∫¢nh h∆∞·ªüng (Influence) - Truy·ªÅn c·∫£m h·ª©ng, l·∫°c quan',
          'S': 'Ki√™n ƒë·ªãnh (Steadiness) - ·ªîn ƒë·ªãnh, ki√™n nh·∫´n',
          'C': 'Tu√¢n th·ªß (Conscientiousness) - C·∫©n th·∫≠n, ch√≠nh x√°c'
        };

        resultsContainer.innerHTML = `
          <div class="assessment-card">
            <div class="assessment-header">
              <div class="assessment-title">
                üíº K·∫øt qu·∫£ DISC
                <span class="assessment-badge">H√†nh vi</span>
              </div>
            </div>

            <div class="assessment-score-display">
              <div class="score-main">${result.primaryTrait || 'N/A'}</div>
              <div class="score-description">Phong c√°ch h√†nh vi ch·ªß ƒë·∫°o c·ªßa b·∫°n</div>
            </div>

            <div class="assessment-details-grid">
              ${Object.entries(scores).map(([trait, percentage]) => `
                <div class="detail-item">
                  <div class="detail-label">${descriptions[trait] || trait}</div>
                  <div class="detail-value">${percentage}%</div>
                  <div class="progress-bar">
                    <div class="progress-fill" style="width: ${percentage}%"></div>
                  </div>
                </div>
              `).join('')}
            </div>

            ${result.analysis ? `
              <div style="margin-top: 20px; padding: 15px; background: rgba(102, 126, 234, 0.05); border-radius: 10px;">
                <div style="font-weight: 600; color: #2c3e50; margin-bottom: 8px;">ü§ñ Ph√¢n t√≠ch AI</div>
                <div style="font-size: 14px; color: #6c757d; line-height: 1.5;">
                  ${result.analysis}
                </div>
              </div>
            ` : ''}

            ${result.recommendations ? `
              <div style="margin-top: 20px; padding: 15px; background: rgba(76, 175, 80, 0.05); border-radius: 10px;">
                <div style="font-weight: 600; color: #2c3e50; margin-bottom: 8px;">üíº G·ª£i √Ω c√¥ng vi·ªác ph√π h·ª£p</div>
                <div style="display: flex; flex-wrap: wrap; gap: 8px; margin-top: 10px;">
                  ${result.recommendations.map(job => `
                    <span style="background: linear-gradient(135deg, #4CAF50, #45a049); color: white; padding: 6px 12px; border-radius: 15px; font-size: 12px; font-weight: 500;">
                      ${job}
                    </span>
                  `).join('')}
                </div>
              </div>
            ` : ''}

            <div style="margin-top: 20px; padding: 15px; background: rgba(255, 107, 107, 0.05); border-radius: 10px;">
              <div style="font-weight: 600; color: #2c3e50; margin-bottom: 8px;">üéØ Phong c√°ch l√†m vi·ªác</div>
              <div style="font-size: 14px; color: #6c757d; line-height: 1.5;">
                ${getDISCAnalysis(result.primaryTrait, scores)}
              </div>
            </div>
          </div>
        `;
      }
    }

    // Show empty state for assessment
    function showEmptyState(type) {
      const resultsContainer = document.getElementById(`${type}-results`);
      resultsContainer.innerHTML = `
        <div class="empty-state">
          <div class="empty-state-icon">üìù</div>
          <div class="empty-state-text">Ch∆∞a c√≥ k·∫øt qu·∫£ ƒë√°nh gi√° ${type.toUpperCase()}</div>
          <button class="action-btn" onclick="takeAssessment('${type}')">L√†m b√†i ${type.toUpperCase()}</button>
        </div>
      `;
    }


    // Update profile statistics
    function updateProfileStats() {
      const assessmentCount = Object.keys(currentAssessmentData).length;

      // Calculate profile completeness
      const fields = ['email', 'phone', 'degree', 'experience'];
      const filledFields = fields.filter(field =>
        document.querySelector(`[value="${field}"]`) &&
        document.querySelector(`[value="${field}"]`).value.trim() !== ''
      ).length;
      const completeness = Math.round((filledFields / fields.length) * 100);

      document.getElementById('assessmentCount').textContent = assessmentCount;
      document.getElementById('profileCompleteness').textContent = `${completeness}%`;
    }

    // Tab switching
    function switchTab(tabName) {
      // Hide all tabs
      document.querySelectorAll('.tab-content').forEach(tab => {
        tab.classList.remove('active');
      });

      // Remove active class from all buttons
      document.querySelectorAll('.tab-btn').forEach(btn => {
        btn.classList.remove('active');
      });

      // Show selected tab
      document.getElementById(tabName).classList.add('active');

      // Add active class to clicked button
      event.target.classList.add('active');
    }

    // Take assessment
    function takeAssessment(type) {
      window.location.href = `/personality-assessments/${type}`;
    }


    // Modal functions
    function openEditModal() {
      document.getElementById('editModal').classList.add('active');
    }

    function closeEditModal() {
      document.getElementById('editModal').classList.remove('active');
    }

    // Helper function to save assessment result
    async function saveAssessmentResult(assessmentType, result) {
      try {
        const userId = '{{user._id}}';
        if (!userId) {
          console.error('User ID not found');
          return false;
        }

        const saveData = {
          user_id: userId,
          assessment_type: assessmentType,
          result: result,
          completed_at: new Date().toISOString()
        };

        const response = await fetch('http://localhost:8000/api/personality-assessment/save', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(saveData)
        });

        const data = await response.json();

        if (response.ok && data.status === 'success') {
          console.log(`Assessment ${assessmentType} saved successfully:`, data.assessment_id);
          return true;
        } else {
          console.error(`Failed to save assessment ${assessmentType}:`, data.message || 'Unknown error');
          return false;
        }
      } catch (error) {
        console.error(`Error saving assessment ${assessmentType}:`, error);
        return false;
      }
    }

    // Helper functions for assessment analysis
    function getBigFiveAnalysis(scores) {
      const traits = [];
      if (scores.openness >= 70) traits.push('S√°ng t·∫°o v√† c·ªüi m·ªü');
      if (scores.conscientiousness >= 70) traits.push('T·∫≠n t√¢m v√† c√≥ t·ªï ch·ª©c');
      if (scores.extraversion >= 70) traits.push('NƒÉng ƒë·ªông v√† h∆∞·ªõng ngo·∫°i');
      if (scores.agreeableness >= 70) traits.push('H√≤a ƒë·ªìng v√† h·ª£p t√°c');
      if (scores.neuroticism <= 30) traits.push('·ªîn ƒë·ªãnh c·∫£m x√∫c');

      if (traits.length > 0) {
        return `B·∫°n th·ªÉ hi·ªán m·∫°nh m·∫Ω c√°c ƒë·∫∑c ƒëi·ªÉm: ${traits.join(', ')}.`;
      } else {
        return 'B·∫°n c√≥ s·ª± c√¢n b·∫±ng h·ª£p l√Ω gi·ªØa c√°c ƒë·∫∑c ƒëi·ªÉm t√≠nh c√°ch.';
      }
    }

    function getDISCAnalysis(primaryTrait, scores) {
      const analyses = {
        'D': 'B·∫°n l√† ng∆∞·ªùi quy·∫øt ƒëo√°n, tr·ª±c ti·∫øp v√† t·∫≠p trung v√†o k·∫øt qu·∫£. Th√≠ch h·ª£p v·ªõi c√°c vai tr√≤ l√£nh ƒë·∫°o v√† qu·∫£n l√Ω.',
        'I': 'B·∫°n l√† ng∆∞·ªùi truy·ªÅn c·∫£m h·ª©ng, l·∫°c quan v√† c√≥ kh·∫£ nƒÉng giao ti·∫øp t·ªët. Th√≠ch h·ª£p v·ªõi c√°c c√¥ng vi·ªác trong lƒ©nh v·ª±c truy·ªÅn th√¥ng, b√°n h√†ng.',
        'S': 'B·∫°n l√† ng∆∞·ªùi ki√™n ƒë·ªãnh, ƒë√°ng tin c·∫≠y v√† ·ªßng h·ªô ƒë·ªôi nh√≥m. Th√≠ch h·ª£p v·ªõi c√°c vai tr√≤ h·ªó tr·ª£, hu·∫•n luy·ªán.',
        'C': 'B·∫°n l√† ng∆∞·ªùi c·∫©n th·∫≠n, ch√≠nh x√°c v√† tu√¢n th·ªß quy tr√¨nh. Th√≠ch h·ª£p v·ªõi c√°c c√¥ng vi·ªác ƒë√≤i h·ªèi s·ª± ch√≠nh x√°c v√† ph√¢n t√≠ch.'
      };

      return analyses[primaryTrait] || 'B·∫°n c√≥ phong c√°ch h√†nh vi ƒë·ªôc ƒë√°o v√† c√¢n b·∫±ng.';
    }


    // Loading functions
    function showLoading(elementId) {
      document.getElementById(elementId).classList.add('active');
    }

    function hideLoading(elementId) {
      document.getElementById(elementId).classList.remove('active');
    }
  </script>
</body>

</html>